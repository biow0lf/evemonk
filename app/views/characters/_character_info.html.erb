<div class="col-xs-12 col-sm-12 col-md-12 col-lg-4 col-xl-4"
     data-controller="character-info">
  <div class="clearfix">
    <h4 class="float-left"><%= @character.name %></h4>
    <%= form_with(url: character_path(@character.character_id), model: @character, class: "float-right") do %>
      <%= button_tag(class: "btn btn-primary mb-2") do %>
        <%= image_tag("bootstrap-icons/icons/arrow-repeat.svg") %>
      <% end %>
    <% end %>
  </div>

  <div class="card">
    <ul class="list-group list-group-flush">
      <li class="list-group-item text-center">
        <%= image_tag(@character.icon_medium,
                      alt: @character.name,
                      class: "rounded border",
                      size: "130x130",
                      loading: "lazy") %>
      </li>
      <% if @character.corporation %>
        <li class="list-group-item text-break">
          Corporation: <%= link_to(@character.corporation.name,
                                   universe_corporation_path(@character.corporation.corporation_id)) %>
        </li>
      <% end %>
      <% if @character.alliance %>
        <li class="list-group-item text-break">
          Alliance: <%= link_to(@character.alliance.name,
                                universe_alliance_path(@character.alliance.alliance_id)) %>
        </li>
      <% end %>
      <li class="list-group-item text-break">
        Race: <%= @character.race.name %>
      </li>
      <li class="list-group-item text-break">
        Bloodline: <%= @character.bloodline.name %>
      </li>
      <li class="list-group-item text-break">
        Ancestry: <%= @character.ancestry.name %>
      </li>
      <% if @character.faction %>
        <li class="list-group-item text-break">
          Faction: <%= @character.faction.name %>
        </li>
      <% end %>
      <li class="list-group-item">
        Gender: <%= @character.gender %>
      </li>
      <li class="list-group-item text-break">
        Total SP: <%= @character.full_sp_formatted %>
      </li>
      <% if @character.unallocated_sp && @character.unallocated_sp > 0 %>
        <li class="list-group-item text-break">
          Unallocated SP: <%= @character.unallocated_sp_formatted %>
        </li>
      <% end %>
      <li class="list-group-item text-break">
        Security status: <%= @character.security_status %>
      </li>
      <li class="list-group-item text-break">
        Wallet: <%= @character.wallet_formatted %> ISK
      </li>
      <li class="list-group-item text-break">
        Born: <%= @character.birthday_formatted %>
      </li>
    </ul>
    <p class="card-text text-center">
      <small class="text-muted">
        Last updated <%= time_ago_in_words(@character.updated_at) %> ago
      </small>
    </p>
  </div>
</div>
